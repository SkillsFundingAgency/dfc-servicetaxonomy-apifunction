{
  "query": "MATCH (o:esco__Occupation {uri:{occupation}})-->(s:esco__Skill)<--(o2:esco__Occupation) MATCH (o2)-[es:esco__relatedEssentialSkill]->(s) WITH o, o2, COUNT(es) as MatchingEssentialSkillsCount MATCH (o2)-[os:esco__relatedOptionalSkill]->(s) WITH o, o2, MatchingEssentialSkillsCount, COUNT(os) as MatchingOptionalSkillsCount MATCH (o2)-[:esco__relatedEssentialSkill]->(s) WITH o2, MatchingEssentialSkillsCount, MatchingOptionalSkillsCount, COUNT(*) as TotalEssentialSkillsCount MATCH (o2)-[:esco__relatedOptionalSkill]->(s) WITH o2, MatchingEssentialSkillsCount, MatchingOptionalSkillsCount, TotalEssentialSkillsCount, COUNT(*) as TotalOptionalSkillsCount WITH { uri:o2.uri, occupation:head(o2.skos__prefLabel), MatchingEssentialSkills:MatchingEssentialSkillsCount, MatchingOptionalSkills:MatchingOptionalSkillsCount, TotalEssentialSkills:TotalEssentialSkillsCount, TotalOptionalSkills:TotalOptionalSkillsCount, lastmodified:head(o2.dct__modified) } as occupationsList MATCH (o:esco__Occupation {uri:{occupation}})-->(s:esco__Skill) MATCH (o)-[es:esco__relatedEssentialSkill]->(s) WITH occupationsList, o, COUNT(es) as totalEssentialSkillsCount MATCH (o)-[os:esco__relatedOptionalSkill]->(s) WITH occupationsList, o, totalEssentialSkillsCount, COUNT(os) as totalOptionalSkillsCount WITH { uri:o.uri, occupation:head(o.skos__prefLabel), alternativeLabels:o.skos__altLabel, lastmodified:o.dct__modified, totalEssentialSkills:totalEssentialSkillsCount, totalOptionalSkills:totalOptionalSkillsCount, occupations:collect(occupationsList)} as occupation RETURN occupation",
  "queryParam": [
    {
      "name": "occupation"
    }
  ]
}